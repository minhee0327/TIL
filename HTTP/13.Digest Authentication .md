# CH13: 다이제스트 인증

[Intro]

기본 인증은 편리하고 유연하지만 전혀 안전하지 않다.
(base64는 디코딩이 쉬워 의도치않게 비번을 보는건 막을 수 있지만, 악의를 가진 사람을 막을수 없음)

기본 인증을 안전하게 사용하는 유일한 방법은 SSL과 결합해서 사용하는 것이다.

다이제스트 인증은 기본인증과 호환되는 더 안전한 대체제로 개발이 되었다.

널리 쓰이지는 않지만 개념은 보안 트랜잭션을 구현할 때 유용하다.

---

### 1) 다이제스트 인증의 개선점

기본 인증의 가장 심각한 결함을 수정한 또다른 HTTP 인증 프로토콜

특징

- 비밀번호를 네트워크를 통해 절대 평문으로 보내지 않는다.
- 인증 체결을 가로채서 재현하려는 악의적인 사람을 차단한다.
- 구현에 따라 메세지 내용 위조를 막는것도 가능하다.
- 그 외 몇몇 잘 알려진 형태의 공격을 막는다.
- 다이제스트 인증이 가능한 가장 안전한 프로토콜은 아니다. 하지만 기본 인증보다 훨씬 강력하다.

    [HTTP 트랜잭션을 위한 많은 요구사항을 만족하려면 HTTPS + TLS 가 더 적합하다.]

- 다이제스트 인증은 다른 인터넷 서비스를 위해 제안된 많은 인기있는 보안체계보다 강력하다.

### ① 비밀번호를 안전하게 지키기 위해 요약 사용하기

- 다이제스트인증의 좌우명: "절대로 비밀번호를 네트워크를 통해 보내지 않는다."
- 비밀번호를 보내는 대신, 비밀번호를 비가역적으로 엮은 '지문(fingerprint)', '요약(digest)'를 보낸다.

### ② 단방향 요약

- 요약은 **정보 본문의 압축**이다.
- 요약은 **단방향 함수로 동작**한다.
- 일반적으로 입력가능한 무한 가지의 모든 입력값들을**유한한 범위의 압축으로 변환한다.**
- 인기있는 요약 함수 중 하나인 MD5는 임의의 바이트 배열을 원래 길이와 상관없이 **128비트 요약으로 변환**한다.
- 요약에서 중요한 것은 만약 pw를 모르면 서버에 보낼 알맞은 요약을 추측하기 위해 큰 시간소모를 한다는 점.
요약을 갖고 있다면, 무한개의 입력값들 중 요약을 생성하는 것을 찾기위해 끔찍하게 많은 시간 소모를 한다.

### ③ 재전송 방지를 위한 nonce 사용

재전송 공격 방지를 위해서 서버는 클라이언트에게 nonce라고 불리는 특별하고 자주바뀌는 증표를 거낸다.
(약 1밀리초마다, 혹은 인증할 때마다 건내준다.)

저장된 비밀번호 요약은 특정 nonce 값에 대해서만 유효하기 때문에 비밀번호 없이 공격자가 올바른 요약을 계산하는 것은 가능하지 않다.

### ④ 다이제스트 인증 핸드 셰이크

기존 헤더에 몇몇 새 옵션을 추가했고, 선택적 헤더인 Authorization-Info가 새로 추가되었다.

- 다이제스트 인증의 핵심
    - 공개된 정보, 비밀정보, 시한부 nonce 값을 조합한 단방향 요약.

---

(이하 다이제스트 인증 필기 중략)