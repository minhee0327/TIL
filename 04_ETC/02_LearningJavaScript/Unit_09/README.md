# 객체와 객체지향 프로그래밍

- 배열과 객체 차이
  |배열|객체|
  |----|--|  
   |값을가지며 각 값마다 숫자형 인덱스 존재|프로퍼티를 가지고, 각 프로퍼티는 문자열이나 심볼인덱스 존재|
  |순서 있음|순서보장X|

  - 프로퍼티는 키(문자열or심볼)과 값으로 구성
  - 객체의 진짜 특징은 키를 통해 프로퍼티에 접근이 가능하다는 점.

- 프로퍼티 나열(example01.js)

  - for... in:
    - 키가 심볼인 프로퍼티는 포함하지 않음
    - hasOwnProperty를 써서 다른타입의 객체, 혹은 예외상황을 거르는 습관.
  - Object.keys
    - for...in루프를 쓴것과 같은 결과를 반환할 수 있음
    - 객체의 프로퍼티 키를 배열로 가져와야할때 사용하면 편리함

- 객체지향프로그래밍(OOP) - (example02.js)

  - 객체는 데이터와 기능을 논리적으로 묶어놓은 것
  - 자동차가 객체라면?
    - 데이터: 제조사, 모델, 차량번호 등등
    - 기능: 가속, 변속, 문열기, 등등
  - 사물에 관해 추상적으로, 구체적으로 생각을 가능하게 함.
  - OOP기본용어 정리
    - Class: (어떤 자동차)처럼 추상적이고, 범용적인것 [class키워드]
    - 인스턴스: 특정자동차처럼 구체적이고 한정적 [new키워드로 생성]
    - 메서드: 기능
    - 클래스 메서드: 클래스에 속하지만, 특정 인스턴스에 묶이지 않는 기능
    - 생성자: 인스턴스를 처음만들때 생성자 실행(객체 인스턴스를 초기화함)
  - OOP클래스는 계층적으로 분류하는 수단제공
    - 예: 자동차보다 범용범위 '운송수단'
      - 운송수단 클래스에는 자동차와 마찬가지로 '이동거리'프로퍼티를 가지고있음.
      - 자동차와 달리 바퀴는 없을 수 있음.
      - 이때 운송수단을 _슈퍼클래스_, 자동차를 *서브클래스*라고 부름.
  - javaScript에서 어느수준까지 접근할수있는지, 세밀하게 설정할 수있는 메커니즘이 제공되지 않음. 이를 보완하는 수단으로 프로퍼티 이름 앞줄에 밑줄을붙여서, '가짜 접근 제한'을 사용할 수있음.(example02.js)
  - 하지만, 진정한 제한이라고 하기 어려움. 프로퍼티를 꼭 포호해야할때는 '스코프'를 이용하여 WeakMap인스턴스를 사용해서 완벽하게 보호할 수 있음.
    - 즉시호출하는 함수표현식을 써서, WeakMap을 클로저로 감싸고 바깥에서 접근할 수 없게 함.WeakMap으로 외부에서 접근하면 안되는 프로퍼티를 안전하게 저장.(example03.js)  
      (프로퍼티 이름에 심볼을 쓸수도 있지만, 심폴프로퍼티도 접근 가능하기 때문에 한계가 있음.)

- (자바스크립트에서)클래스는 함수다.
- 프로토타입 [example04.js]
  - 프로토타입 체인을 통해 동적 디스패치 구현
  - 모든 함수에는 prototype이라는 특별한 프로퍼티가 있음
  - 일반적인 함수에서는 사용할 일없음. 단, 객체 생성자로 동작하는 함수에서 프로토타입이 중요함.
  - new 키워드로 새 인스턴스를 만들었을때 중요.
  - 객체의 프로퍼티나 메서드에 접근하려할때 그런 프로퍼티나 메서드가 존재하지 않으면, 자바스크립트는 객체의 프로토타입에서 해당 프로퍼티나 메서드를 찾음
  - 인스턴스에서 메서드나 프로퍼티를 정의하면 프로토타입에 있는 것을 가리는 효과있음.
- 정적메서드(클래스메서드) - example05.js

  - 클래스명.~~
  - 범용적인 작업에 사용

- 상속(exmaple06.js)

  - 클래스의 인스턴스는 클래스의 기능을 모두 상속
  - 상속은 한단계로 끝나지 않음.
  - 객체의 프로토타입에서 메서드를 찾지 못하면, 프로토타입의 프로토타입을 검색함.  
    (프로토타입 체인이 만들어지는 원리)
  - JS는 조건에 맞는 프로토타입을 찾을때까지 프로토타입 체인을 계속 거슬러 올라간다.  
    (조건에 맞는 프로토타입이 없을경우, error발생)
  - 클래스 계층구조를 설계할때, 프로토타입체인을 염두에 두면 효율적인 구조를짤수있다.

* 다형성(polymohpism)

  - 슈퍼 클래스의 멤버인 인스턴스를 가리키는 말.
  - 자바스크립트는 느슨한 타입을 사용하고, 객체를 어디서든 쓸수있기 때문에 어떤면에서는 (JS의)객체는 모두 다형성을 가지고 있다고 할 수 있다.
  - 자바스크립트의 모든 객체는 루트클래스인 Object의 인스턴스.

* 객체 프로퍼티 나열다시보기(example07.js)
  - 객체 obj와 프로퍼티 x가 obj에서 obj.hasOwnProperty(x)는 obj에 프로퍼티 x가 있다면 true를 반환하며, 프로퍼티 x가 obj에 정의되지 않았거나 , 프로토타입에만 정의되있다면 false반환.
  - ES6클래스 설계의도대로면, 데이터 프로퍼티를 prototype체인이 아니라 인스턴스에 정의해야하는데, 이걸 강제하는 장치는 없기 때문에 hasOwnProperty를 사용해서 검증하거나, Object.keys를 사용해서 인스턴스에 정의된 프로퍼티만 사용하는 것이 좋다.

- 다중상속, 믹스인, 인터페이스(example08.js)
  - 한 클래스가, 수퍼클래스를 두개이상 가지는기능
  - 다중상속은 충돌의 위험이 있음
  - 따라서 다중상속 기능을 지원하지 않는 언어중에는 인터페이스 개념을 도입해서 상황을 대처함.
  - JS는 프로토타입 체인에서 여러 부모를 검색하지 않기때문에, 단일 상속언어라고 해야하지만, 어떤면에서는 다중상속이나 인터페이스보다 나은 방법을 제공(더 못할때도 있음!)
  - **믹스인**: 다중상속이 필요한 문제에 대한 해답으로 내놓은 개념
    - 기능을 필요한 만큼 섞어놓은것
    - JS는 느슨한타입을 사용하고, 관대한 언어인만큼(?) 어떤 기능이라도 언제든, 어떤 객체에든 추가가 가능함!
