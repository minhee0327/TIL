# 데이터 계층과 물리계층

- 용어

  - 데이터링크: 같은 규칙을 바탕으로 연결되어있는 한덩어리의 기기
  - NIC(Network Interface Card): 흔히 랜카드로 불림. 네트워크에 접속하기 위해 컴퓨터 내에 설치되는 확장카드
  - MAC주소(Media Access Control Address) : 랜 카드마다 할당되어있는 고유한 물리주소. (48bit), 네트워크상의 다른 장치들은 이 주소를 사용하여 네트워크 내의 특정 포트를 찾는다. 네트워크 상에서 설정된 논리주소인 IP주소와 달리 변경할 수 없다.

- 데이터 링크 계층의 역할

  - 네트워크간의 차이를 흡수함
    - 데이터 링크간의 차이를 흡수하고, 네트워크 계층보다 위에 있는 계층이 그 차이를 의식하지 않고 작동하도록함
  - 네트워크 계층과 물리계층의 중개
    - 프레임: 데이터에 헤더 붙인것
  - 데이터 링크 계층의 프로토콜
    - 데이터를 어떻게 주고받을지 결정

- 데이터 계층과 물리계층

  - 통신매체: 신호를 전달하는 것 총칭
  - 물리계층: 통신매체 그 자체
    - 데이터 링크 안에서 신호가 흐르고 있는 부분
    - 비트열과 신호변환이 일어남
    - 기기의 성질에 의존(정해진 프로토콜 없음)
  - 데이터링크 구성요소
    - 노드: 데이터 링크상에 있는 기기(컴퓨터나 라우터)
    - 통신매체
      - 노드간을 연결하는 케이블 등을 뜻함
      - 노드에 접속하기 위한 단자 붙어있음
      - 종류: 금속선 케이블(주로 구리선), 광섬유 케이블(유리), 무선(적외선)
    - 노드와 통신매체를 연결하는 기기
      - 비트열과 신호를 변환하는 것으로 NIC나 모뎀 등

- 네트워크로 가는 현관

  - 모든 데이터는 NIC라는 기기를 통해 컴퓨터를 출입한다.
    - 비트열을 신호로 변환: 컴퓨터에서 네트워크로 가는 현관문(NIC, 네트워크 인터페이스 카드)
  - NIC에는 MAC(Media Access Control)주소 라는 고유번호가 할당되어있음
    - 데이터 링크 계층에서 이 번호를 사용해서 기기를 정함
    - 네트워크를 지나갈때는 IP주소, 데이터 링크 계층 안으로 들어간 후에는 MAC주소 사용.
    - 48자리 bit열을 8bit씩 (:) 또는 (-)으로 구분해서 16진수로 표현
  - MAC주소를 사용해 수신인 확인
    - 데이터 링크 계층의 프로토콜 대부분은 MAC주소를 사용하여 수신인을 확인함.
    - 네트워크 계층에서 헤더의 IP주소를 보고 자기 앞으로 온 것만 받음.

- 브로드캐스트 MAC주소: 같은 데이터 링크 내에 있는 모든 기기에 보낼 수 있는 MAC주소, 모든 비트에 1이 들어있음( ff:ff:ff:ff:ff:ff)
- APR: Address Resolution Protocol

  - 수신인의 IP주소는 알지만, MAC주소는 모를 경우를 위해 존재하는 프로토콜
  - IP주소를 가지고 상대의 MAC주소를 조사할때 사용하는 프로토콜
  - IPv6에서는 APR프로토콜을 이용하지 않고, ND(Neighbor Discovery)기능을 사용해서 해결

- 네트워크 연결방법

  - 연결된 기기 하나하나를 노드라고함
  - 버스형
    - 축이 되는 케이블에서 선을 빼서 그 끝에 노드를 연결, 노드를 붙이고 떼는것이 비교적 간단
  - 링형
    - 이웃하는 양쪽 노드를 연결하여 링 모양으로 연결
    - 링내에서 노드 고장이나 케이블 절단 등이 한곳이라도 일어나면 전체 통신 불가능
  - 스타형
    - 하나의 노드(일반적으로 허브)를 사이에 두고 다른 노드를 연결
    - 네트워크 집중관리 가능하지만, 중신이 되는 노드가 고장나면 전체 영향미침
  - 망형

    - 모든 노드를 1:1로 연결, 일부 케이블이나 노드가 고장나더라도 피해서 통신할 수 있음.(WAN접속형태)

  - 이더넷(Ethernet)

    - 유선 LAN에서 일반적으로 사용되는 규격
    - 이더넷 구조
      - 초기 이더넷에서는 통신환경에 따른 제약에서 CSMA/CD방식으로 불리는 반이중 통신으로 프레임을 주고받음
      - 반이중통신이란, 양방향 통신에서 한쪽씩 번갈아서 전송하는 방식
      - 한쪽에서만 전송할 수 있는 방식으로는 데이터 충돌이 발생하는 경우가 있었다.
        - 리피터허브
        - 동축케이블
      - 현재는 스위칭 허브나 트위스트 페어 케이블, 광섬유 케이블 등이 보급되어 전 이중 통신으로 데이터를 주고받음.

  - 토큰링

    - 프레임이 충돌하지 않도록 권리를 얻은 컴퓨터만 송신할 수 있는 데이터 링크
    - 네트워크 상을 흐르고 있는 토큰이라는 프레임을 사용하여 통신
    - 토큰을 취득한 컴퓨터밖에 송신할 수 없으므로 프레임 충돌이 일어나지 않음
    - 이러한 통신 방법을 토큰 패싱 방식

  - 기타 데이터 링크

    - 광섬유 케이블을 사용하는 FDDI나 케이블을 사용하지 않고 전파나 적외선으로 연결하는 데이터 링크
    - FDDI: Fiber Distributed Data Interface
      - 광섬유 케이블을 사용한 토큰 패싱 방식의 데이터 링므
      - 이중링을만들어서 보통 사용하는 링이 끊어져도 긴급 사용링으로 통신을 계속할 수 있음.
    - 무선랜
      - 전파나 적외선을 이용해 데이터를 송수신하는 통신방법
      - 현재 보급된 무선 LAN의 표준규격을 IEEE802.11이라고 하고 주파수 대역과 통신속도에 따라 규격을 나눔.

  - PPP(Point-to-Point Protocol)
    - 사용자 인증 기능이 추가된 프로토콜
    - 두 지점간에 일대일 통신을 수행하는 프로토콜
  - PPPoE

    - 이더넷상에 있는 두대의 컴퓨터간에 인증을 수행할 수 있도록 한 것.

  - 데이터 링크상의 기기
    - 리피터
      - 신호는 통신매체나 주위한경, 통신 거리등의 영향을 받아 신호가 약해지는 경우가 있는데, 약해지는 정도가 심해지면 0 인지 1인지 판단할 수 없게됨
      - 그래서 네트워크상에서 신호를 보정하는 기기를 설치하고 일그러짐을 방지하는 기기를 리피터라고 한다.
      - 현재는 허브가 대체
    - 브리지
      - 신호 보정에 덧붙여 서로 다른 두개의 데이터 링크를 연결하는 기능을 가진 기기
      - 수신처의 MAC주소를 보고 흘러들어온 것고 ㅏ다른 데이터 링크앞으로 온 것이면 보내고, 같은 데이터 링크 앞으로 온것이면 파기
    - 허브
      - 네트워크상에서 케이블을 분기하기 위한 기기를 허브
      - 하나의 신호를 여러개의 케이블로 보내기 위해 신호를 증폭한다는 점에서 리피터 역할도 갖고있음.
      - 리피터허브 (혹은 패시프허브): 신호의 보정, 증폭기능을 가지고 있지 않은 기기
    - 스위칭허브
      - 목적지의 MAC주소를 보고 여러개의 접속처 중 특정 노드에만 신호를 보내는 기능을 갖고있는 허브.

- arp명령
  - 컴퓨터에 저장된 다른 MAC주소를 표시하는 명령
